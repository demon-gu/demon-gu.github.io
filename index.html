
<!DOCTYPE html>
<html lang="zh-CN ">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BigData || 大数据</title>
    <meta name="author" content="Demon">
    <meta name="description" content="一个程序员小白 ">
    <meta name="keywords" content=" ">
    <link rel="icon" href="/aaa.mp3">
    <link rel="stylesheet" href="/css/antd.min.css">
    
    <link rel="stylesheet" href="/css/full-theme.css">
    
    <script src="/js/vue.js"></script>
    <script src="/js/antd.min.js"></script>
<meta name="generator" content="Hexo 6.2.0"></head>

<body>

    <div id="loading"
        style="height: 100vh; width: 100%; position: fixed;display: flex;z-index: 200; justify-content: space-between;">
        <div id="loadleft" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div id="loadright" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div
            style="position: fixed; height: 100vh; width: 100%;display: flex;justify-content: center;align-items: center;">
            <div id="loadcontent"
                style="width:400px;height:400px;padding:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:solid 10px#a3ddfb; text-align:center;opacity:1;transition:opacity 0.3s ease-out;">
                <div>
                    <h2>LOADING...</h2>
                    <p>加载过慢请开启缓存(浏览器默认开启)</p>
                    <div>
                        <img src="/dancingkitty.gif" alt="loading">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="layout">
        <transition name="into">
            <div v-show="show_page" style="display: none;">
                <div id="menu_show">
                     
<nav id="menu">
    <div class="desktop-menu">
        <a href="/">
            <span class="title">BigData</span>
        </a>
        
        <a href="/">
            <span>
                <a-icon type="home" theme="filled" />
            </span>
            <span>首页</span>
        </a>
        
        <a href="/about">
            <span>
                <a-icon type="idcard" theme="filled" />
            </span>
            <span>关于</span>
        </a>
        
        <a href="/archives">
            <span>
                <a-icon type="folder" theme="filled" />
            </span>
            <span>文章</span>
        </a>
        
        <a href="/like/categories">
            <span>
                <a-icon type="book" theme="filled" />
            </span>
            <span>类别</span>
        </a>
        
        <a href="/like/tags">
            <span>
                <a-icon type="tags" theme="filled" />
            </span>
            <span>标签</span>
        </a>
        
    </div>

    <div :class="'phone-menu ' + menu_show" id="phone-menu">
        <div :class="'title'" @click="menu_show=!menu_show">
            <span style="margin-right: 10px;">
                <a-icon type="appstore" theme="filled" />
            </span>
            <span>BigData</span>
        </div>
        <div class="items" v-show="menu_show">
            
            <a href="/">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="home" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">首页</div>
                </div>
            </a>
            
            <a href="/about">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="idcard" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">关于</div>
                </div>
            </a>
            
            <a href="/archives">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="folder" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">文章</div>
                </div>
            </a>
            
            <a href="/like/categories">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="book" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">类别</div>
                </div>
            </a>
            
            <a href="/like/tags">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="tags" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">标签</div>
                </div>
            </a>
            
        </div>
        <div class="curtain" v-show="menu_show"></div>
    </div>

</nav>
                </div>

                <div id="main">
                    <div id="home-head" style=background-image:url('home.jpg')>
    <script>
        var menu = document.getElementById("menu")
        menu.className += " menu-color"
    </script>
     
    <div id="home-info" class="home-info" @click="home_click">
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="info">
            <div class="wrap">
                <h1>BigData</h1>
                <h3>大数据</h3>
                <h5>一个程序员小白</h5>
            </div>
        </span>
    </div>
     
</div>



<div id="home-posts-wrap" class=>
    <div id="home-posts">

        <div id="posts">
            

<div class="post">

    <a href="/2022/07/06/Linux常用命令/">
        <h2>
            Linux常用命令
        </h2>
    </a>

    <div class="category-and-date">

        

        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2022/7/6
        </span>

    </div>

    <div class="excerpt">
        <div class="content" v-pre>
            
            
            <h1 id="一、基本命令"><a href="#一、基本命令" class="headerlink" title="一、基本命令"></a>一、基本命令</h1><h2 id="1-1-关机和重启"><a href="#1-1-关机和重启" class="headerlink" title="1.1 关机和重启"></a>1.1 关机和重启</h2><p>关机<br>   shutdown -h now     立刻关机<br>   shutdown -h 5     5分钟后关机<br>   poweroff       立刻关机<br> 重启<br>   shutdown -r now     立刻重启<br>   shutdown -r 5     5分钟后重启<br>   reboot         立刻重启</p>
<h2 id="1-2-帮助命令"><a href="#1-2-帮助命令" class="headerlink" title="1.2 帮助命令"></a>1.2 帮助命令</h2><p>–help命令<br>  shutdown –help：<br>  ifconfig  –help：查看网卡信息</p>
<p> man命令（命令说明书）<br>  man shutdown<br>  注意：man shutdown打开命令说明书之后，使用按键q退出</p>
<h1 id="二、目录操作命令"><a href="#二、目录操作命令" class="headerlink" title="二、目录操作命令"></a>二、目录操作命令</h1><h2 id="2-1-目录切换-cd"><a href="#2-1-目录切换-cd" class="headerlink" title="2.1 目录切换 cd"></a>2.1 目录切换 cd</h2><p>命令：cd 目录</p>
<p>cd &#x2F;     切换到根目录<br> cd &#x2F;usr     切换到根目录下的usr目录<br> cd ..&#x2F;     切换到上一级目录 或者  cd ..<br> cd ~     切换到home目录<br> cd -     切换到上次访问的目录</p>
<h2 id="2-2-目录查看-ls-al"><a href="#2-2-目录查看-ls-al" class="headerlink" title="2.2 目录查看 ls [-al]"></a>2.2 目录查看 ls [-al]</h2><p>命令：ls [-al]</p>
<p>ls         查看当前目录下的所有目录和文件<br> ls -a       查看当前目录下的所有目录和文件（包括隐藏的文件）<br> ls -l 或 ll    列表查看当前目录下的所有目录和文件（列表查看，显示更多信息）<br> ls &#x2F;dir       查看指定目录下的所有目录和文件  如：ls &#x2F;usr</p>
<h2 id="2-3-目录操作【增，删，改，查】"><a href="#2-3-目录操作【增，删，改，查】" class="headerlink" title="2.3 目录操作【增，删，改，查】"></a>2.3 目录操作【增，删，改，查】</h2><h3 id="2-3-1-创建目录【增】-mkdir"><a href="#2-3-1-创建目录【增】-mkdir" class="headerlink" title="2.3.1 创建目录【增】 mkdir"></a>2.3.1 创建目录【增】 mkdir</h3><p>命令：mkdir 目录</p>
<p>mkdir   aaa       在当前目录下创建一个名为aaa的目录<br> mkdir   &#x2F;usr&#x2F;aaa   在指定目录下创建一个名为aaa的目录</p>
<h3 id="2-3-2-删除目录或文件【删】rm"><a href="#2-3-2-删除目录或文件【删】rm" class="headerlink" title="2.3.2 删除目录或文件【删】rm"></a>2.3.2 删除目录或文件【删】rm</h3><p>命令：rm [-rf] 目录</p>
<p>删除文件：<br> rm 文件     删除当前目录下的文件<br> rm -f 文件   删除当前目录的的文件（不询问）</p>
<p>删除目录：<br> rm -r aaa   递归删除当前目录下的aaa目录<br> rm -rf aaa   递归删除当前目录下的aaa目录（不询问）</p>
<p>全部删除：<br> rm -rf *   将当前目录下的所有目录和文件全部删除<br> rm -rf &#x2F;*   【自杀命令！慎用！慎用！慎用！】将根目录下的所有文件全部删除</p>
<p>注意：rm不仅可以删除目录，也可以删除其他文件或压缩包，为了方便大家的记忆，无论删除任何目录或文件，都直接使用 rm -rf 目录&#x2F;文件&#x2F;压缩包</p>
<h3 id="2-3-3-目录修改【改】mv-和-cp"><a href="#2-3-3-目录修改【改】mv-和-cp" class="headerlink" title="2.3.3 目录修改【改】mv 和 cp"></a>2.3.3 目录修改【改】mv 和 cp</h3><p>一、重命名目录<br>   命令：mv 当前目录  新目录<br>   例如：mv aaa bbb   将目录aaa改为bbb<br>   注意：mv的语法不仅可以对目录进行重命名而且也可以对各种文件，压缩包等进行   重命名的操作</p>
<p>二、剪切目录<br>   命令：mv 目录名称 目录的新位置<br>   示例：将&#x2F;usr&#x2F;tmp目录下的aaa目录剪切到 &#x2F;usr目录下面   mv &#x2F;usr&#x2F;tmp&#x2F;aaa &#x2F;usr<br>   注意：mv语法不仅可以对目录进行剪切操作，对文件和压缩包等都可执行剪切操作</p>
<p>三、拷贝目录<br>   命令：cp -r 目录名称 目录拷贝的目标位置  -r代表递归<br>   示例：将&#x2F;usr&#x2F;tmp目录下的aaa目录复制到 &#x2F;usr目录下面   cp &#x2F;usr&#x2F;tmp&#x2F;aaa  &#x2F;usr<br>   注意：cp命令不仅可以拷贝目录还可以拷贝文件，压缩包等，拷贝文件和压缩包时不   用写-r递归</p>
<h3 id="2-3-4-搜索目录【查】find"><a href="#2-3-4-搜索目录【查】find" class="headerlink" title="2.3.4 搜索目录【查】find"></a>2.3.4 搜索目录【查】find</h3><p>命令：find 目录 参数 文件名称<br> 示例：find &#x2F;usr&#x2F;tmp -name ‘a*’   查找&#x2F;usr&#x2F;tmp目录下的所有以a开头的目录或文件</p>
<h1 id="三、文件操作命令"><a href="#三、文件操作命令" class="headerlink" title="三、文件操作命令"></a>三、文件操作命令</h1><h2 id="3-1-文件操作【增，删，改，查】"><a href="#3-1-文件操作【增，删，改，查】" class="headerlink" title="3.1 文件操作【增，删，改，查】"></a>3.1 文件操作【增，删，改，查】</h2><h3 id="3-1-1-新建文件【增】touch"><a href="#3-1-1-新建文件【增】touch" class="headerlink" title="3.1.1 新建文件【增】touch"></a>3.1.1 新建文件【增】touch</h3><p>命令：touch 文件名<br> 示例：在当前目录创建一个名为aa.txt的文件     touch  aa.txt</p>
<h3 id="3-1-2-删除文件-【删】-rm"><a href="#3-1-2-删除文件-【删】-rm" class="headerlink" title="3.1.2 删除文件 【删】 rm"></a>3.1.2 删除文件 【删】 rm</h3><p>命令：rm -rf 文件名</p>
<h3 id="3-1-3-修改文件【改】-vi或vim"><a href="#3-1-3-修改文件【改】-vi或vim" class="headerlink" title="3.1.3 修改文件【改】 vi或vim"></a>3.1.3 修改文件【改】 vi或vim</h3><p>【vi编辑器的3种模式】<br>   基本上vi可以分为三种状态，分别是命令模式（command mode）、插入模式（Insert mode）和底行模式（last line mode），各模式的功能区分如下：<br> \1) 命令行模式command mode）<br>    控制屏幕光标的移动，字符、字或行的删除，查找，移动复制某区段及进入Insert mode下，或者到 last line mode。<br>    命令行模式下的常用命令：<br>    【1】控制光标移动：↑，↓，j<br>    【2】删除当前行：dd<br>    【3】查找：&#x2F;字符<br>    【4】进入编辑模式：i o a<br>    【5】进入底行模式：:</p>
<p> \2) 编辑模式（Insert mode）<br>    只有在Insert mode下，才可以做文字输入，按「ESC」键可回到命令行模式。<br>    编辑模式下常用命令：<br>    【1】ESC 退出编辑模式到命令行模式；</p>
<p> \3) 底行模式（last line mode）<br>    将文件保存或退出vi，也可以设置编辑环境，如寻找字符串、列出行号……等。<br>    底行模式下常用命令：<br>    【1】退出编辑：  :q<br>    【2】强制退出：  :q!<br>    【3】保存并退出：  :wq</p>
<p><strong>打开文件</strong></p>
<p>命令：vi 文件名<br> 示例：打开当前目录下的aa.txt文件   vi aa.txt 或者 vim aa.txt</p>
<p>注意：使用vi编辑器打开文件后，并不能编辑，因为此时处于命令模式，点击键盘i&#x2F;a&#x2F;o进入编辑模式。</p>
<p><strong>编辑文件</strong> </p>
<p>使用vi编辑器打开文件后点击按键：i ，a或者o即可进入编辑模式。</p>
<p>i:在光标所在字符前开始插入<br> a:在光标所在字符后开始插入<br> o:在光标所在行的下面另起一新行插入</p>
<p><strong>保存或者取消编辑</strong> </p>
<p>保存文件：</p>
<p>第一步：ESC  进入命令行模式<br> 第二步：:   进入底行模式<br> 第三步：wq   保存并退出编辑</p>
<p>取消编辑：</p>
<p>第一步：ESC  进入命令行模式<br> 第二步：:   进入底行模式<br> 第三步：q!   撤销本次修改并退出编辑</p>
<h3 id="3-1-4-文件的查看【查】"><a href="#3-1-4-文件的查看【查】" class="headerlink" title="3.1.4 文件的查看【查】"></a>3.1.4 文件的查看【查】</h3><p>文件的查看命令：cat&#x2F;more&#x2F;less&#x2F;tail</p>
<p><strong>cat：看最后一屏</strong> </p>
<p>示例：使用cat查看&#x2F;etc&#x2F;sudo.conf文件，只能显示最后一屏内容<br> cat sudo.conf</p>
<p><strong>more：百分比显示</strong> </p>
<p>示例：使用more查看&#x2F;etc&#x2F;sudo.conf文件，可以显示百分比，回车可以向下一行，空格可以向下一页，q可以退出查看<br> more sudo.conf</p>
<p><strong>less：翻页查看</strong> </p>
<p>示例：使用less查看&#x2F;etc&#x2F;sudo.conf文件，可以使用键盘上的PgUp和PgDn向上   和向下翻页，q结束查看<br> less sudo.conf</p>
<p><strong>tail：指定行数或者动态查看</strong> </p>
<p>示例：使用tail -10 查看&#x2F;etc&#x2F;sudo.conf文件的后10行，Ctrl+C结束<br> tail -10 sudo.conf</p>
<h2 id="3-2-权限修改"><a href="#3-2-权限修改" class="headerlink" title="3.2 权限修改"></a>3.2 权限修改</h2><p>rwx：r代表可读，w代表可写，x代表该文件是一个可执行文件，如果rwx任意位置变为-则代表不可读或不可写或不可执行文件。</p>
<p>示例：给aaa.txt文件权限改为可执行文件权限，aaa.txt文件的权限是-rw——-</p>
<p>第一位：-就代表是文件，d代表是文件夹<br> 第一段（3位）：代表拥有者的权限<br> 第二段（3位）：代表拥有者所在的组，组员的权限<br> 第三段（最后3位）：代表的是其他用户的权限</p>
<p>  421  421  421<br> -  rw-  —   —</p>
<pre><code class="shell">命令：chmod +x aaa.txt
或者采用8421法
命令：chmod 100 aaa.txt
</code></pre>
<h1 id="四、压缩文件操作"><a href="#四、压缩文件操作" class="headerlink" title="四、压缩文件操作"></a>四、压缩文件操作</h1><h2 id="4-1-打包和压缩"><a href="#4-1-打包和压缩" class="headerlink" title="4.1 打包和压缩"></a>4.1 打包和压缩</h2><p>Windows的压缩文件的扩展名  .zip&#x2F;.rar</p>
<p>linux中的打包文件：aa.tar </p>
<p>linux中的压缩文件：bb.gz<br> linux中打包并压缩的文件：.tar.gz</p>
<p>Linux中的打包文件一般是以.tar结尾的，压缩的命令一般是以.gz结尾的。<br> 而一般情况下打包和压缩是一起进行的，打包并压缩后的文件的后缀名一般.tar.gz。</p>
<p>命令：tar -zcvf 打包压缩后的文件名 要打包的文件<br> 其中：z：调用gzip压缩命令进行压缩<br>  c：打包文件<br>  v：显示运行过程<br>  f：指定文件名</p>
<p> 示例：打包并压缩&#x2F;usr&#x2F;tmp 下的所有文件 压缩后的压缩包指定名称为xxx.tar<br> tar -zcvf ab.tar aa.txt bb.txt<br> 或：tar -zcvf ab.tar  *</p>
<h2 id="4-2-解压"><a href="#4-2-解压" class="headerlink" title="4.2 解压"></a>4.2 解压</h2><p>命令：tar [-zxvf] 压缩文件   </p>
<p>其中：x：代表解压<br>示例：将&#x2F;usr&#x2F;tmp 下的ab.tar解压到当前目录下</p>
<p><img src="https://img-blog.csdnimg.cn/20181108101105208.png" alt="img"></p>
<p>示例：将&#x2F;usr&#x2F;tmp 下的ab.tar解压到根目录&#x2F;usr下<br> tar -xvf ab.tar -C &#x2F;usr——C代表指定解压的位置</p>
<p><img src="https://img-blog.csdnimg.cn/20181108101123319.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIzMzI5MTY3,size_16,color_FFFFFF,t_70" alt="img"></p>
<h1 id="五、查找命令"><a href="#五、查找命令" class="headerlink" title="五、查找命令"></a>五、查找命令</h1><h2 id="5-1-grep"><a href="#5-1-grep" class="headerlink" title="5.1 grep"></a>5.1 grep</h2><p>grep命令是一种强大的文本搜索工具</p>
<p>使用实例：</p>
<pre><code class="shell">ps -ef | grep sshd  查找指定ssh服务进程 
ps -ef | grep sshd | grep -v grep 查找指定服务进程，排除gerp身 
ps -ef | grep sshd -c 查找指定进程个数 
</code></pre>
<h2 id="5-2-find"><a href="#5-2-find" class="headerlink" title="5.2 find"></a>5.2 find</h2><p>find命令在目录结构中搜索文件，并对搜索结果执行指定的操作。 </p>
<p>find 默认搜索当前目录及其子目录，并且不过滤任何结果（也就是返回所有文件），将它们全都显示在屏幕上。 </p>
<p>使用实例：</p>
<pre><code class="shell">find . -name &quot;*.log&quot; -ls  在当前目录查找以.log结尾的文件，并显示详细信息。 
find /root/ -perm 600   查找/root/目录下权限为600的文件 
find . -type f -name &quot;*.log&quot;  查找当目录，以.log结尾的普通文件 
find . -type d | sort   查找当前所有目录并排序 
find . -size +100M  查找当前目录大于100M的文件
</code></pre>
<h2 id="5-3-locate"><a href="#5-3-locate" class="headerlink" title="5.3 locate"></a>5.3 locate</h2><p>locate 让使用者可以很快速的搜寻某个路径。默认每天自动更新一次，所以使用locate 命令查不到最新变动过的文件。为了避免这种情况，可以在使用locate之前，先使用updatedb命令，手动更新数据库。如果数据库中没有查询的数据，则会报出locate: can not stat () &#96;&#x2F;var&#x2F;lib&#x2F;mlocate&#x2F;mlocate.db’: No such file or directory该错误！updatedb即可！</p>
<p><strong>yum -y install mlocate 如果是精简版CentOS系统需要安装locate命令</strong> </p>
<p>使用实例：</p>
<pre><code class="shell">updatedb
locate /etc/sh 搜索etc目录下所有以sh开头的文件 
locate pwd 查找和pwd相关的所有文件
</code></pre>
<h2 id="5-4-whereis"><a href="#5-4-whereis" class="headerlink" title="5.4 whereis"></a>5.4 whereis</h2><p>whereis命令是定位可执行文件、源代码文件、帮助文件在文件系统中的位置。这些文件的属性应属于原始代码，二进制文件，或是帮助文件。</p>
<p>使用实例：</p>
<pre><code class="shell">whereis ls    将和ls文件相关的文件都查找出来
</code></pre>
<h2 id="5-5-which"><a href="#5-5-which" class="headerlink" title="5.5 which"></a>5.5 which</h2><p>which命令的作用是在PATH变量指定的路径中，搜索某个系统命令的位置，并且返回第一个搜索结果。</p>
<p>使用实例：</p>
<pre><code class="shell">which pwd  查找pwd命令所在路径 
which java  查找path中java的路径 
</code></pre>
<h1 id="六、su、sudo"><a href="#六、su、sudo" class="headerlink" title="六、su、sudo"></a>六、su、sudo</h1><h2 id="6-1-su"><a href="#6-1-su" class="headerlink" title="6.1 su"></a>6.1 su</h2><p>su用于用户之间的切换。但是切换前的用户依然保持登录状态。如果是root 向普通或虚拟用户切换不需要密码，反之普通用户切换到其它任何用户都需要密码验证。</p>
<pre><code class="shell">su test:切换到test用户，但是路径还是/root目录
su - test : 切换到test用户，路径变成了/home/test
su : 切换到root用户，但是路径还是原来的路径
su - : 切换到root用户，并且路径是/root
</code></pre>
<p>su不足：如果某个用户需要使用root权限、则必须要把root密码告诉此用户。</p>
<p>退出返回之前的用户：exit</p>
<h2 id="6-2-sudo"><a href="#6-2-sudo" class="headerlink" title="6.2 sudo"></a>6.2 sudo</h2><p>sudo是为所有想使用root权限的普通用户设计的。可以让普通用户具有临时使用root权限的权利。只需输入自己账户的密码即可。</p>
<p>进入sudo配置文件命令：</p>
<pre><code class="shell">vi /etc/sudoer或者visudo
</code></pre>
<pre><code class="shell">案例：
允许hadoop用户以root身份执行各种应用命令，需要输入hadoop用户的密码。
hadoop  ALL=(ALL)   ALL 

案例：
只允许hadoop用户以root身份执行ls 、cat命令，并且执行时候免输入密码。 
配置文件中： 
hadoop  ALL=NOPASSWD:  /bin/ls, /bin/cat 
</code></pre>
<h1 id="七、系统服务"><a href="#七、系统服务" class="headerlink" title="七、系统服务"></a>七、系统服务</h1><pre><code class="shell">service iptables status  --查看iptables服务的状态
service iptables start  --开启iptables服务
service iptables stop  --停止iptables服务
service iptables restart  --重启iptables服务

chkconfig iptables off  --关闭iptables服务的开机自启动
chkconfig iptables on  --开启iptables服务的开机自启动
</code></pre>
<h1 id="八、网络管理"><a href="#八、网络管理" class="headerlink" title="八、网络管理"></a>八、网络管理</h1><h2 id="8-1-主机名配置"><a href="#8-1-主机名配置" class="headerlink" title="8.1 主机名配置"></a>8.1 主机名配置</h2><pre><code class="shell">[root@node1 ~]# vi /etc/sysconfig/network
NETWORKING=yes
HOSTNAME=node1
</code></pre>
<h2 id="8-2-IP-地址配置"><a href="#8-2-IP-地址配置" class="headerlink" title="8.2 IP 地址配置"></a>8.2 IP 地址配置</h2><pre><code class="shell">[root@node1 ~]# vi /etc/sysconfig/network-scripts/ifcfg-eth0
</code></pre>
<h2 id="8-3-域名映射"><a href="#8-3-域名映射" class="headerlink" title="8.3 域名映射"></a>8.3 域名映射</h2><p>&#x2F;etc&#x2F;hosts文件用于在通过主机名进行访问时做ip地址解析之用。所以，你想访问一个什么样的主机名，就需要把这个主机名和它对应的ip地址。</p>
<pre><code class="shell">[root@node1 ~]# vi /etc/hosts
#### 在最后加上
192.168.52.201  node1
192.168.52.202  node2
192.168.52.203  node3
</code></pre>
<h2 id="九、定时任务指令crontab-配置"><a href="#九、定时任务指令crontab-配置" class="headerlink" title="九、定时任务指令crontab 配置"></a>九、定时任务指令crontab 配置</h2><p>crontab是Unix和Linux用于设置定时任务的指令。通过crontab命令，可以在固定间隔时间,执行指定的系统指令或shell脚本。时间间隔的单位可以是分钟、小时、日、月、周及以上的任意组合。</p>
<p>crontab安装：</p>
<pre><code class="shell">yum install crontabs
</code></pre>
<p>服务操作说明：</p>
<pre><code class="shell">service crond start   ## 启动服务 
service crond stop    ## 关闭服务 
service crond restart ## 重启服务
</code></pre>
<h2 id="9-1-命令格式"><a href="#9-1-命令格式" class="headerlink" title="9.1 命令格式"></a>9.1 命令格式</h2><p>crontab [-u user] file</p>
<p>crontab [-u user] [ -e | -l | -r ]</p>
<p><em><strong>参数说明：</strong></em></p>
<p><strong>-u user：</strong>用来设定某个用户的crontab服务  </p>
<p><strong>file：</strong>file是命令文件的名字,表示将file做为crontab的任务列表文件</p>
<p>并载入crontab。</p>
<p><strong>-e：</strong>编辑某个用户的crontab文件内容。如果不指定用户，则表示编辑当前</p>
<p>用户的crontab文件。</p>
<p><strong>-l：</strong>显示某个用户的crontab文件内容。如果不指定用户，则表示显示当前</p>
<p>用户的crontab文件内容。</p>
<p><strong>-r：</strong>删除定时任务配置，从&#x2F;var&#x2F;spool&#x2F;cron目录中删除某个用户的crontab</p>
<p>文件，如果不指定用户，则默认删除当前用户的crontab文件。</p>
<p>命令示例：</p>
<pre><code class="shell">crontab file [-u user] ## 用指定的文件替代目前的crontab
crontab -l [-u user]  ## 列出用户目前的crontab
crontab -e [-u user]  ## 编辑用户目前的crontab
</code></pre>
<h2 id="9-2-配置说明、实例"><a href="#9-2-配置说明、实例" class="headerlink" title="9.2 配置说明、实例"></a>9.2 配置说明、实例</h2><p>命令：*  *   *  *  *  command  </p>
<p>解释：分  时  日  月  周  命令</p>
<p><strong>第1列表示分钟1～59 每分钟用*或者 *&#x2F;1表示</strong>   </p>
<p><strong>第2列表示小时0～23（0表示0点）</strong></p>
<p><strong>第3列表示日期1～31</strong>  </p>
<p><strong>第4列表示月份1～12</strong>  </p>
<p><strong>第5列标识号星期0～6（0表示星期天）</strong>  </p>
<p><strong>第6列要运行的命令</strong></p>
<p>配置实例：</p>
<pre><code class="shell">先打开定时任务所在的文件：
crontab -e

每分钟执行一次date命令 
*/1 * * * * date &gt;&gt; /root/date.txt

每晚的21:30重启apache。 
30 21 * * * service httpd restart

每月1、10、22日的4 : 45重启apache。  
45 4 1,10,22 * * service httpd restart

每周六、周日的1 : 10重启apache。 
10 1 * * 6,0 service httpd restart

每天18 : 00至23 : 00之间每隔30分钟重启apache。
0,30   18-23    *   *   *   service httpd restart
晚上11点到早上7点之间，每隔一小时重启apache
*  23-7/1    *   *   *   service httpd restart
</code></pre>
<h1 id="十、其他命令"><a href="#十、其他命令" class="headerlink" title="十、其他命令"></a>十、其他命令</h1><h2 id="10-1-查看当前目录：pwd"><a href="#10-1-查看当前目录：pwd" class="headerlink" title="10.1 查看当前目录：pwd"></a>10.1 查看当前目录：pwd</h2><p>命令：pwd   查看当前目录路径</p>
<h2 id="10-2-查看进程：ps-ef"><a href="#10-2-查看进程：ps-ef" class="headerlink" title="10.2 查看进程：ps -ef"></a>10.2 查看进程：ps -ef</h2><p>命令：ps -ef   查看所有正在运行的进程</p>
<h2 id="10-3-结束进程：kill"><a href="#10-3-结束进程：kill" class="headerlink" title="10.3 结束进程：kill"></a>10.3 结束进程：kill</h2><p>命令：kill pid 或者 kill -9 pid(强制杀死进程)      pid:进程号</p>
<h2 id="10-4-网络通信命令："><a href="#10-4-网络通信命令：" class="headerlink" title="10.4 网络通信命令："></a>10.4 网络通信命令：</h2><p><strong>ifconfig：查看网卡信息</strong></p>
<p>命令：ifconfig 或 ifconfig | more</p>
<p><strong>ping：查看与某台机器的连接情况</strong></p>
<p>命令：ping ip</p>
<p><strong>netstat -an：查看当前系统端口</strong></p>
<p>命令：netstat -an</p>
<p>搜索指定端口<br> 命令：netstat -an | grep 8080</p>
<h2 id="10-5-配置网络"><a href="#10-5-配置网络" class="headerlink" title="10.5 配置网络"></a>10.5 配置网络</h2><p>命令：setup</p>
<h2 id="10-6-重启网络"><a href="#10-6-重启网络" class="headerlink" title="10.6 重启网络"></a>10.6 重启网络</h2><p>命令：service network restart</p>
<h2 id="10-7-切换用户"><a href="#10-7-切换用户" class="headerlink" title="10.7 切换用户"></a>10.7 切换用户</h2><p>命令：su - 用户名</p>
<h2 id="10-8-关闭防火墙"><a href="#10-8-关闭防火墙" class="headerlink" title="10.8 关闭防火墙"></a>10.8 关闭防火墙</h2><p>命令：chkconfig iptables off</p>
<p>或者：</p>
<pre><code class="shell"> iptables -L;
 iptables -F;
 service iptables stop
</code></pre>
<h2 id="10-9-修改文件权限"><a href="#10-9-修改文件权限" class="headerlink" title="10.9 修改文件权限"></a>10.9 修改文件权限</h2><p>命令：chmod 777</p>
<h2 id="10-10-清屏"><a href="#10-10-清屏" class="headerlink" title="10.10 清屏"></a>10.10 清屏</h2><p>命令：ctrl + l</p>
<h2 id="10-11-vi模式下快捷键"><a href="#10-11-vi模式下快捷键" class="headerlink" title="10.11 vi模式下快捷键"></a>10.11 vi模式下快捷键</h2><p>esc后:</p>
<p>保存并退出快捷键：shift+z+z</p>
<p>光标跳到最后一行快捷键：shift+g</p>
<p>删除一行：dd</p>
<p>复制一行内容：y+y</p>
<p>粘贴复制的内容：p</p>
<h1 id="十一、Linux项目部署"><a href="#十一、Linux项目部署" class="headerlink" title="十一、Linux项目部署"></a>十一、Linux项目部署</h1><h2 id="11-1-安装jdk1-8"><a href="#11-1-安装jdk1-8" class="headerlink" title="11.1 安装jdk1.8"></a>11.1 安装jdk1.8</h2><p>先卸载open-jdk</p>
<p>java -version<br> rpm -qa | grep java</p>
<p>rpm -e –nodeps java-1.7.0-openjdk-1.7.0.45-2.4.3.3.el6.x86_64<br> rpm -e –nodeps java-1.6.0-openjdk-1.6.0.0-1.66.1.13.0.el6.x86_64</p>
<p>开始安装：<br> mkdir &#x2F;usr&#x2F;local&#x2F;src&#x2F;java<br> rz 上传jdk tar包<br> tar -zxvf jdk-8u181-linux-x64.tar.gz</p>
<p>yum install glibc.i686</p>
<p>配置环境变量：<br> vi &#x2F;etc&#x2F;profile</p>
<p> 在末尾行添加<br>  #set java environment<br>  JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;src&#x2F;jdk8&#x2F;jdk1.8.0_181<br>  CLASSPATH&#x3D;.:$JAVA_HOME&#x2F;lib.tools.jar<br>  PATH&#x3D;$JAVA_HOME&#x2F;bin:$PATH<br>  export JAVA_HOME CLASSPATH PATH</p>
<p> 保存退出<br> source &#x2F;etc&#x2F;profile  使更改的配置立即生效<br> java -version  查看JDK版本信息，如果显示出1.8证明成功</p>
<h2 id="11-2-安装MySQL5-6"><a href="#11-2-安装MySQL5-6" class="headerlink" title="11.2 安装MySQL5.6"></a>11.2 安装MySQL5.6</h2><h3 id="11-2-1-上传MySQL5-6的tar包"><a href="#11-2-1-上传MySQL5-6的tar包" class="headerlink" title="11.2.1 上传MySQL5.6的tar包"></a>11.2.1 上传MySQL5.6的tar包</h3><p>创建目录：mkdir &#x2F;usr&#x2F;local&#x2F;src&#x2F;mysql5.6</p>
<p>上传：MySQL-5.6.34-1.rhel5.x86_64.rpm-bundle.tar 到上面的目录中</p>
<h3 id="11-2-2-安装"><a href="#11-2-2-安装" class="headerlink" title="11.2.2 安装"></a>11.2.2 安装</h3><p><strong>第一步：解压</strong></p>
<p>   命令：tar -xvf MySQL-5.6.34-1.rhel5.x86_64.rpm-bundle.tar</p>
<p><strong>第二步：检测是否已经安装了mysql</strong></p>
<p>   命令：rpm -qa | grep mysql  </p>
<p>   如果已经安装了，将其卸载，如：</p>
<p>   rpm -e –nodeps  mysql-libs-5.1.71-1.el6.x86_64</p>
<p><strong>第三步：安装MySQL的服务端</strong></p>
<p>   命令：rpm -ivh MySQL-server-5.6.34-1.rhel5.x86_64.rpm</p>
<p><strong>第四步：安装MySQL的客户端</strong></p>
<p>   命令：rpm -ivh MySQL-client-5.6.34-1.rhel5.x86_64.rpm</p>
<p><strong>第五步：查看MySQL服务运行状态</strong></p>
<p>   命令：service mysql status</p>
<p><strong>第六步：启动MySQL服务</strong></p>
<p>   命令：service mysql start</p>
<p><strong>第七步：使用root账号登录mysql</strong></p>
<p><strong>在安装mysql server时有句提示：</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20181108102452301.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIzMzI5MTY3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p><strong>注意：这个密码是不安全的，所有需要修改初始密码。</strong></p>
<ol>
<li><strong>使用密码登录mysql账号：mysql -uroot -p</strong></li>
<li><strong>修改root密码：SET PASSWORD &#x3D; PASSWORD(‘root’);</strong></li>
</ol>
<h3 id="11-2-3-开机自动启动设置"><a href="#11-2-3-开机自动启动设置" class="headerlink" title="11.2.3 开机自动启动设置"></a>11.2.3 开机自动启动设置</h3><p>加入到系统服务：</p>
<p>chkconfig –add mysql</p>
<p>自动启动：</p>
<p>chkconfig mysql on</p>
<p>查询列表：</p>
<p>chkconfig</p>
<p>说明：都没关闭（off）时是没有自动启动。</p>
<h3 id="11-2-4-开启远程访问"><a href="#11-2-4-开启远程访问" class="headerlink" title="11.2.4 ***开启远程访问*****"></a>11.2.4 <em>*<em>*</em>*开启远程访问****</em>*</h3><p>登录：</p>
<p>mysql -uroot –proot</p>
<p>设置远程访问（使用root密码）：</p>
<p>grant all privileges on <em>.</em> to ‘root’ @’%’ identified by ‘root’;</p>
<p>flush privileges;</p>
<p>退出mysql，在centos环境下打开3306防火墙</p>
<p>&#x2F;sbin&#x2F;iptables -I INPUT -p tcp –dport 3306 -j ACCEPT</p>
<p>&#x2F;etc&#x2F;rc.d&#x2F;init.d&#x2F;iptables save</p>
<p>&#x2F;etc&#x2F;init.d&#x2F;iptables status</p>
<h2 id="11-3-安装tomcat部署项目"><a href="#11-3-安装tomcat部署项目" class="headerlink" title="11.3 安装tomcat部署项目"></a>11.3 安装tomcat部署项目</h2><p>准备工作：将web项目打成war包，改名为ROOT.war</p>
<h3 id="11-3-1-创建ucenter用户"><a href="#11-3-1-创建ucenter用户" class="headerlink" title="11.3.1 创建ucenter用户"></a>11.3.1 创建ucenter用户</h3><p>一般情况下，发布应用程序都不是使用root用户的，需要创建一个普通用户来发布程序；</p>
<p>创建ucenter用户：</p>
<p>useradd -d &#x2F;ucenter ucenter</p>
<p>设置密码：</p>
<p>passwd ucenter （密码 ucenter）</p>
<p>切换用户：</p>
<p>su - ucenter</p>
<h3 id="11-3-2-安装Tomcat"><a href="#11-3-2-安装Tomcat" class="headerlink" title="11.3.2 安装Tomcat"></a>11.3.2 安装Tomcat</h3><p>tomcat只要解压就可以使用。</p>
<p>1、创建web目录<br> mkdir &#x2F;ucenter&#x2F;web</p>
<p>2、上传apache-tomcat-7.0.57.tar.gz</p>
<p>3、解压：tar -xvf apache-tomcat-7.0.57.tar.gz</p>
<p>4、重命名：mv apache-tomcat-7.0.57 itcast-usermanage</p>
<p>5、启动tomcat：<br>    cd itcast-usermanage&#x2F;bin&#x2F;<br>    .&#x2F;startup.sh 或者 sh startup.sh</p>
<p>6、查看日志：<br>    tail -f ..&#x2F;logs&#x2F;catalina.out</p>
<p>7、查看效果 <a target="_blank" rel="noopener" href="http://192.168.0.160:8080/">http://192.168.0.160:8080/</a></p>
<p>发现无法访问：</p>
<p><img src="https://img-blog.csdnimg.cn/20181108103218984.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIzMzI5MTY3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>8、防火墙打开 8080 端口<br>    &#x2F;sbin&#x2F;iptables -I INPUT -p tcp –dport 8080 -j ACCEPT</p>
<p>   &#x2F;etc&#x2F;rc.d&#x2F;init.d&#x2F;iptables save</p>
<p>9、安装成功</p>
<p><img src="https://img-blog.csdnimg.cn/20181108103523123.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIzMzI5MTY3,size_16,color_FFFFFF,t_70" alt="img"></p>
<h3 id="11-3-3-部署用户管理项目"><a href="#11-3-3-部署用户管理项目" class="headerlink" title="11.3.3 部署用户管理项目"></a>11.3.3 部署用户管理项目</h3><p>1、上传usermanage.sql和ROOT.war到&#x2F;ucenter&#x2F;web</p>
<p>2、执行数据库脚本</p>
<p>   cat user_manager.sql | mysql -uroot -p123456</p>
<p>3、部署web程序</p>
<p>3.1 删除webapps下的所有文件</p>
<p>   cd &#x2F;ucenter&#x2F;web&#x2F;usermanage&#x2F;webapps</p>
<p>   rm -rf *</p>
<p>3.2 拷贝ROOT.war到webapps</p>
<p>   cp &#x2F;ucenter&#x2F;web&#x2F;ROOT.war .</p>
<p>3.3 重新启动tomcat</p>
<p>   cd ..&#x2F;bin&#x2F;</p>
<p>   sh startup.sh &amp;&amp; tail -f ..&#x2F;logs&#x2F;catalina.out</p>
<p>3.4 启动浏览器测试</p>
<p><em><strong>注意事项：Centos环境下部署项目中文乱码问题解决方案</strong></em></p>
<p>   今天在一台新的CentOS机器上使用c3p0连接池操作mysql数据库出现中文乱码问题，具体表现为：查询时无中文乱码问题，写数据时中文乱码，查看了机器上数据库字符集也是UTF8，应该不会出现中文乱码才对，最后在c3p0配置文件中 jdbcUrl后加上：?useUnicode&#x3D;true&amp;characterEncoding&#x3D;UTF8 中文就不会乱码了。</p>
<p>【C3P0配置文件】</p>
<pre><code class="html">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;c3p0-config&gt;
  &lt;default-config&gt;
    &lt;property name=&quot;driverClass&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;
    &lt;property name=&quot;jdbcUrl&quot;&gt;jdbc:mysql://localhost:3306/user_manager_yun6?useUnicode=true&amp;amp;characterEncoding=UTF8 &lt;/property&gt;
    &lt;property name=&quot;user&quot;&gt;root&lt;/property&gt;
    &lt;property name=&quot;password&quot;&gt;root&lt;/property&gt;
    &lt;property name=&quot;acquireIncrement&quot;&gt;2&lt;/property&gt;
    &lt;property name=&quot;initialPoolSize&quot;&gt;5&lt;/property&gt;
    &lt;property name=&quot;minPoolSize&quot;&gt;1&lt;/property&gt;
    &lt;property name=&quot;maxPoolSize&quot;&gt;5&lt;/property&gt;
  &lt;/default-config&gt;
&lt;/c3p0-config&gt;
</code></pre>
<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<h2 id="11-4-Linux下使用FastDFS"><a href="#11-4-Linux下使用FastDFS" class="headerlink" title="11.4 Linux下使用FastDFS"></a>11.4 Linux下使用FastDFS</h2><p>相关的安装包我打包到云盘上了，链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/13NDYYil4mgLhkb5CYsc2Ww">百度网盘 请输入提取码</a> 提取码：66tn</p>
<p><strong>单节点FastDFS</strong></p>
<p>整个安装过程非常复杂，很容易出错，建议进行多次备份。</p>
<p>我们这里不打算安装多台虚拟机，因此会把tracker和storage都安装在一起。</p>
<h3 id="11-4-1-安装gcc"><a href="#11-4-1-安装gcc" class="headerlink" title="11.4.1 安装gcc"></a>11.4.1 安装gcc</h3><p>GCC用来对C语言代码进行编译运行，使用yum命令安装：</p>
<pre><code class="shell">yum -y install gcc
</code></pre>
<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p>后面会用到解压命令（unzip），所以这里可以用yum把unzip 也装一下</p>
<pre><code class="shell">yum install -y unzip zip
</code></pre>
<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<h3 id="11-4-2-安装libevent"><a href="#11-4-2-安装libevent" class="headerlink" title="11.4.2 安装libevent"></a>11.4.2 安装libevent</h3><pre><code class="shell">yum -y install libevent
</code></pre>
<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<h3 id="11-4-3-安装libfastcommon-master"><a href="#11-4-3-安装libfastcommon-master" class="headerlink" title="11.4.3 安装libfastcommon-master"></a>11.4.3 安装libfastcommon-master</h3><p>解压刚刚上传的libfastcommon-master.zip<br> unzip libfastcommon-master.zip</p>
<p>进入解压完成的目录<br> cd libfastcommon-master</p>
<p>编译并且安装：<br> .&#x2F;make.sh<br> .&#x2F;make.sh install</p>
<h3 id="11-4-4-安装fastdfs"><a href="#11-4-4-安装fastdfs" class="headerlink" title="11.4.4 安装fastdfs"></a>11.4.4 安装fastdfs</h3><pre><code class="shell">tar -zxvf FastDFS_v5.08.tar.gz
cd FastDFS
./make.sh
./make.sh install
</code></pre>
<p>如果安装成功，会看到&#x2F;etc&#x2F;init.d&#x2F;下看到提供的脚本文件：</p>
<pre><code class="shell">ll /etc/init.d/ | grep fdfs
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20181108105749555.png" alt="img"></p>
<ul>
<li><code>fdfs_trackerd</code> 是tracker启动脚本</li>
<li><code>fdfs_storaged</code> 是storage启动脚本</li>
</ul>
<p>能够在 &#x2F;etc&#x2F;fdfs&#x2F; 目录下看到默认的配置文件模板：</p>
<pre><code>ll /etc/fdfs/
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/2018110810581811.png" alt="img"></p>
<ul>
<li><code>tarcker.conf.sample</code> 是tracker的配置文件模板</li>
<li><code>storage.conf.sample</code> 是storage的配置文件模板</li>
<li><code>client.conf.sample</code> 是客户端的配置文件模板</li>
</ul>
<h3 id="11-4-5-配置并启动tracker服务"><a href="#11-4-5-配置并启动tracker服务" class="headerlink" title="11.4.5 配置并启动tracker服务"></a>11.4.5 配置并启动tracker服务</h3><p>1）首先将模板文件复制</p>
<pre><code class="shell">cp /etc/fdfs/tracker.conf.sample /etc/fdfs/tracker.conf
</code></pre>
<p>2）修改复制后的配置文件：</p>
<pre><code class="shell">vim /etc/fdfs/tracker.conf 
</code></pre>
<p># 修改的内容如下：</p>
<pre><code class="shell">base_path=/项目名/tracker                 # 存储日志和数据的根目录
</code></pre>
<p>3）新建目录：</p>
<pre><code class="shell">mkdir -p /项目名/tracker
</code></pre>
<p>注意：关闭防火墙：</p>
<pre><code class="shell">chkconfig iptables off
</code></pre>
<p>4）启动和停止</p>
<pre><code class="shell">service fdfs_trackerd start # 启动fdfs_trackerd服务，停止用stop
</code></pre>
<p>检查FastDFS Tracker Server是否启动成功：</p>
<pre><code class="shell">ps -ef | grep fdfs_trackerd
</code></pre>
<p>设置tracker服务开机启动:</p>
<pre><code class="shell">chkconfig fdfs_trackerd on
</code></pre>
<h3 id="11-4-6-配置并启动storage服务"><a href="#11-4-6-配置并启动storage服务" class="headerlink" title="11.4.6 配置并启动storage服务"></a>11.4.6 <strong>配置并启动storage服务</strong></h3><p>1）首先将模板文件复制</p>
<pre><code class="shell">cp /etc/fdfs/storage.conf.sample /etc/fdfs/storage.conf
</code></pre>
<p>2）修改复制后的配置文件：</p>
<pre><code class="shell">vim /etc/fdfs/storage.conf
</code></pre>
<p># 修改的内容如下:</p>
<pre><code class="shell">base_path=/项目名/storage                 # 数据和日志文件存储根目录 

store_path0=/项目名/storage           # 第一个存储目录 

tracker_server=192.168.56.101:22122       #  tracker服务器IP和端口 
</code></pre>
<p>3）新建目录：</p>
<pre><code class="shell">mkdir -p /项目名/storage
</code></pre>
<p><strong>注意关闭防火墙： <code>chkconfig iptables off</code></strong> </p>
<p>4）启动和停止</p>
<pre><code class="shell">service fdfs_storaged start  # 启动fdfs_storaged服务，停止用stop
</code></pre>
<p>设置storage服务开机启动：</p>
<pre><code class="shell">chkconfig fdfs_storaged on
</code></pre>
<p>ps -ef | grep fdfs</p>
<p><img src="https://img-blog.csdnimg.cn/20181108110740433.png" alt="img"></p>
<h2 id="11-5-安装fastdfs-nginx-module"><a href="#11-5-安装fastdfs-nginx-module" class="headerlink" title="11.5 安装fastdfs-nginx-module"></a>11.5 安装fastdfs-nginx-module</h2><h3 id="11-5-1-解压"><a href="#11-5-1-解压" class="headerlink" title="11.5.1 解压"></a>11.5.1 解压</h3><pre><code class="shell">tar -zxvf fastdfs-nginx-module_v1.16.tar.gz
</code></pre>
<h3 id="11-5-2-修改config"><a href="#11-5-2-修改config" class="headerlink" title="11.5.2 修改config"></a>11.5.2 修改config</h3><p>1）进入src目录</p>
<pre><code class="shell">cd fastdfs-nginx-module/src/
</code></pre>
<p>2）编辑config</p>
<pre><code class="shell">vim config
</code></pre>
<p>使用以下底行命令：</p>
<pre><code class="shell">:%s+/usr/local/+/usr/+g
</code></pre>
<p>将所有的&#x2F;usr&#x2F;local替换为 &#x2F;usr，这个才是正确的目录:</p>
<p><img src="https://img-blog.csdnimg.cn/20181108110958613.png" alt="img"></p>
<h3 id="11-5-3-配置nginx与FastDFS关联配置文件"><a href="#11-5-3-配置nginx与FastDFS关联配置文件" class="headerlink" title="11.5.3 配置nginx与FastDFS关联配置文件"></a>11.5.3 配置nginx与FastDFS关联配置文件</h3><p>复制 fastdfs-nginx-module 源码中的配置文件到&#x2F;etc&#x2F;fdfs 目录， 并修改</p>
<pre><code class="shell">cp /usr/local/项目名/fastdfs-nginx-module/src/mod_fastdfs.conf /etc/fdfs/

vi /etc/fdfs/mod_fastdfs.conf
</code></pre>
<p>修改以下配置：</p>
<pre><code class="shell">connect_timeout=10                       # 客户端访问文件连接超时时长（单位：秒）

tracker_server=192.168.56.101:22122    # tracker服务IP和端口

url_have_group_name=true                # 访问链接前缀加上组名

store_path0=/leyou/storage            # 文件存储路径
</code></pre>
<p>复制 FastDFS 的部分配置文件到&#x2F;etc&#x2F;fdfs 目录</p>
<pre><code class="shell">cd /usr/local/项目名/FastDFS/conf/
cp http.conf mime.types /etc/fdfs/
</code></pre>
<h2 id="11-6-安装Nginx的插件"><a href="#11-6-安装Nginx的插件" class="headerlink" title="11.6 安装Nginx的插件"></a>11.6 安装Nginx的插件</h2><h3 id="11-6-1-如果没有安装过nginx"><a href="#11-6-1-如果没有安装过nginx" class="headerlink" title="11.6.1 如果没有安装过nginx"></a>11.6.1 如果没有安装过nginx</h3><p>1、安装nginx的依赖库</p>
<pre><code class="shell">yum -y install gcc pcre pcre-devel zlib zlib-devel openssl openssl-devel
</code></pre>
<p>2、解压安装包</p>
<p>tar -zxvf nginx-1.10.0.tar.gz</p>
<p>3、配置nginx安装包，并指定fastdfs-nginx-model</p>
<pre><code class="shell">cd nginx-1.10.0

./configure --prefix=/opt/nginx --sbin-path=/usr/bin/nginx --add-module=/usr/local/leyou/fastdfs-nginx-module/src
</code></pre>
<p><strong>注意</strong>：在执行.&#x2F;configure配置nginx参数的时候，需要将fastdfs-nginx-moudle源码作为模块编译进去。</p>
<p>4、编译并安装</p>
<pre><code class="shell">make &amp;&amp; make install
</code></pre>
<h3 id="11-6-2-如果已经安装过nginx"><a href="#11-6-2-如果已经安装过nginx" class="headerlink" title="11.6.2 如果已经安装过nginx"></a>11.6.2 <strong>如果已经安装过nginx</strong></h3><p>1、 进入nginx目录：</p>
<pre><code class="shell">cd /usr/local/项目名/nginx-1.10.0/
</code></pre>
<p>2、 配置FastDFS 模块</p>
<pre><code class="shell">./configure --prefix=/opt/nginx --sbin-path=/usr/bin/nginx --add-module=/usr/local/项目名/fastdfs-nginx-module/src
</code></pre>
<p>注意：这次配置时，要添加fastdfs-nginx-moudle模块</p>
<p>3、编译，注意，这次不要安装（install）</p>
<pre><code class="shell">make
</code></pre>
<p>4、替换nginx二进制文件:</p>
<p>备份：</p>
<pre><code class="shell">mv /usr/bin/nginx /usr/bin/nginx-bak
</code></pre>
<p>用新编译的nginx启动文件替代原来的：</p>
<pre><code class="shell">cp objs/nginx /usr/bin/
</code></pre>
<h3 id="11-6-3-启动nginx"><a href="#11-6-3-启动nginx" class="headerlink" title="11.6.3 启动nginx"></a>11.6.3 启动nginx</h3><p>配置nginx整合fastdfs-module模块</p>
<p>我们需要修改nginx配置文件，在&#x2F;opt&#x2F;nginx&#x2F;config&#x2F;nginx.conf文件中：</p>
<pre><code class="shell">vim  /opt/nginx/conf/nginx.conf
</code></pre>
<p>将文件中，原来的<code>server 80&#123; ...&#125;</code> 部分代码替换为如下代码：</p>
<pre><code class="shell">server &#123;
    listen       80;
    server_name  image.项目名.com;
    # 监听域名中带有group的，交给FastDFS模块处理
    location ~/group([0-9])/ &#123;
        ngx_fastdfs_module;
    &#125;
    location / &#123;
        root   html;
        index  index.html index.htm;
    &#125;
    error_page   500 502 503 504  /50x.html;
    location = /50x.html &#123;
        root   html;
    &#125;
&#125;
</code></pre>
<p>启动nginx：</p>
<pre><code class="shell">nginx	# 启动nginx

nginx -s stop	# 停止nginx

nginx -s reload	# 重新载入配置文件
</code></pre>
<p>可通过ps -ef | grep nginx查看nginx是否已启动成功</p>
<p><img src="https://img-blog.csdnimg.cn/20181108111638573.png" alt="img"></p>
<h3 id="11-6-4-设置nginx开机启动"><a href="#11-6-4-设置nginx开机启动" class="headerlink" title="11.6.4 设置nginx开机启动"></a>11.6.4 设置nginx开机启动</h3><p>创建一个开机启动的脚本：</p>
<pre><code class="shell">vim /etc/init.d/nginx
</code></pre>
<p>添加以下内容：</p>
<pre><code class="shell">#!/bin/sh
#
# nginx - this script starts and stops the nginx daemon
#
# chkconfig:   - 85 15
# description:  NGINX is an HTTP(S) server, HTTP(S) reverse \
#               proxy and IMAP/POP3 proxy server
# processname: nginx
# config:      /etc/nginx/nginx.conf
# config:      /etc/sysconfig/nginx
# pidfile:     /var/run/nginx.pid

# Source function library.
. /etc/rc.d/init.d/functions

# Source networking configuration.
. /etc/sysconfig/network

# Check that networking is up.
[ &quot;$NETWORKING&quot; = &quot;no&quot; ] &amp;&amp; exit 0

nginx=&quot;/usr/bin/nginx&quot;
prog=$(basename $nginx)

NGINX_CONF_FILE=&quot;/opt/nginx/conf/nginx.conf&quot;

[ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx

lockfile=/var/lock/subsys/nginx

make_dirs() &#123;
   # make required directories
   user=`$nginx -V 2&gt;&amp;1 | grep &quot;configure arguments:.*--user=&quot; | sed &#39;s/[^*]*--user=\([^ ]*\).*/\1/g&#39; -`
   if [ -n &quot;$user&quot; ]; then
      if [ -z &quot;`grep $user /etc/passwd`&quot; ]; then
         useradd -M -s /bin/nologin $user
      fi
      options=`$nginx -V 2&gt;&amp;1 | grep &#39;configure arguments:&#39;`
      for opt in $options; do
          if [ `echo $opt | grep &#39;.*-temp-path&#39;` ]; then
              value=`echo $opt | cut -d &quot;=&quot; -f 2`
              if [ ! -d &quot;$value&quot; ]; then
                  # echo &quot;creating&quot; $value
                  mkdir -p $value &amp;&amp; chown -R $user $value
              fi
          fi
       done
    fi
&#125;

start() &#123;
    [ -x $nginx ] || exit 5
    [ -f $NGINX_CONF_FILE ] || exit 6
    make_dirs
    echo -n $&quot;Starting $prog: &quot;
    daemon $nginx -c $NGINX_CONF_FILE
    retval=$?
    echo
    [ $retval -eq 0 ] &amp;&amp; touch $lockfile
    return $retval
&#125;

stop() &#123;
    echo -n $&quot;Stopping $prog: &quot;
    killproc $prog -QUIT
    retval=$?
    echo
    [ $retval -eq 0 ] &amp;&amp; rm -f $lockfile
    return $retval
&#125;

restart() &#123;
    configtest || return $?
    stop
    sleep 1
    start
&#125;

reload() &#123;
    configtest || return $?
    echo -n $&quot;Reloading $prog: &quot;
    killproc $nginx -HUP
    RETVAL=$?
    echo
&#125;

force_reload() &#123;
    restart
&#125;

configtest() &#123;
  $nginx -t -c $NGINX_CONF_FILE
&#125;

rh_status() &#123;
    status $prog
&#125;

rh_status_q() &#123;
    rh_status &gt;/dev/null 2&gt;&amp;1
&#125;

case &quot;$1&quot; in
    start)
        rh_status_q &amp;&amp; exit 0
        $1
        ;;
    stop)
        rh_status_q || exit 0
        $1
        ;;
    restart|configtest)
        $1
        ;;
    reload)
        rh_status_q || exit 7
        $1
        ;;
    force-reload)
        force_reload
        ;;
    status)
        rh_status
        ;;
    condrestart|try-restart)
        rh_status_q || exit 0
            ;;
    *)
        echo $&quot;Usage: $0 &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest&#125;&quot;
        exit 2
esac
</code></pre>
<p>修改文件权限，并加入服务列表</p>
<pre><code class="shell"># 修改权限
chmod 777 /etc/init.d/nginx 
# 添加到服务列表
chkconfig --add /etc/init.d/nginx 
</code></pre>
<p>设置开机启动</p>
<pre><code class="shell">chkconfig nginx on
</code></pre>
<h2 id="11-7-安装Elasticsearch"><a href="#11-7-安装Elasticsearch" class="headerlink" title="11.7 安装Elasticsearch"></a>11.7 安装Elasticsearch</h2><p>需要虚拟机JDK1.8及以上</p>
<h3 id="11-7-1-新建一个用户leyou"><a href="#11-7-1-新建一个用户leyou" class="headerlink" title="11.7.1 新建一个用户leyou"></a>11.7.1 新建一个用户leyou</h3><p>出于安全考虑，elasticsearch默认不允许以root账号运行。</p>
<p>创建用户：</p>
<pre><code class="shell">useradd leyou
</code></pre>
<p>设置密码：</p>
<pre><code class="shell">passwd leyou
</code></pre>
<p>切换用户：</p>
<pre><code class="shell">su - leyou
</code></pre>
<h3 id="11-7-2-上传安装包-并解压"><a href="#11-7-2-上传安装包-并解压" class="headerlink" title="11.7.2 上传安装包,并解压"></a>11.7.2 上传安装包,并解压</h3><p>我们将安装包上传到：&#x2F;home&#x2F;leyou目录</p>
<p>解压缩：</p>
<pre><code class="shell">tar -zxvf elasticsearch-6.2.4.tar.gz
</code></pre>
<p>我们把目录重命名：</p>
<pre><code class="shell">mv elasticsearch-6.3.0/ elasticsearch
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20181108112304883.png" alt="img"></p>
<p>进入，查看目录结构：</p>
<p><img src="https://img-blog.csdnimg.cn/20181108112318744.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIzMzI5MTY3,size_16,color_FFFFFF,t_70" alt="img"></p>
<h3 id="11-7-3-修改配置"><a href="#11-7-3-修改配置" class="headerlink" title="11.7.3 修改配置"></a>11.7.3 修改配置</h3><p>我们进入config目录：cd config</p>
<p>需要修改的配置文件有两个：</p>
<p><img src="https://img-blog.csdnimg.cn/20181108112439949.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIzMzI5MTY3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>1、<strong>jvm.options</strong></p>
<p>Elasticsearch基于Lucene的，而Lucene底层是java实现，因此我们需要配置jvm参数。</p>
<p>编辑jvm.options：</p>
<pre><code class="shell">vim jvm.options
</code></pre>
<p>默认配置如下：</p>
<p>-Xms1g<br> -Xmx1g</p>
<p>内存占用太多了，我们调小一些：</p>
<p>-Xms512m<br> -Xmx512m</p>
<p>2、<strong>elasticsearch.yml</strong></p>
<pre><code class="shell">vim elasticsearch.yml
</code></pre>
<p>修改数据和日志目录：</p>
<pre><code class="shell">path.data: /home/leyou/elasticsearch/data # 数据目录位置
path.logs: /home/leyou/elasticsearch/logs # 日志目录位置
</code></pre>
<p>我们把data和logs目录修改指向了elasticsearch的安装目录。但是这两个目录并不存在，因此我们需要创建出来。</p>
<p>进入elasticsearch的根目录，然后创建：</p>
<pre><code class="shell">mkdir data
mkdir logs
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20181108112635753.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIzMzI5MTY3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>修改绑定的ip：</p>
<pre><code class="shell">network.host: 0.0.0.0 # 绑定到0.0.0.0，允许任何ip来访问
</code></pre>
<p>默认只允许本机访问，修改为0.0.0.0后则可以远程访问</p>
<h3 id="11-7-4-运行"><a href="#11-7-4-运行" class="headerlink" title="11.7.4 运行"></a>11.7.4 运行</h3><p>进入elasticsearch&#x2F;bin目录，可以看到下面的执行文件：</p>
<p><img src="https://img-blog.csdnimg.cn/20181108112727539.png" alt="img"></p>
<p>然后输入命令：</p>
<pre><code class="shell">./elasticsearch
</code></pre>
<p>或者后台运行：</p>
<pre><code class="shell">./elasticsearch -d
</code></pre>
<h3 id="11-7-5-错误1：内核过低"><a href="#11-7-5-错误1：内核过低" class="headerlink" title="11.7.5 错误1：内核过低"></a>11.7.5 错误1：内核过低</h3><p><img src="https://img-blog.csdnimg.cn/20181108112845749.png" alt="img"></p>
<p>修改elasticsearch.yml文件，在最下面添加如下配置： 然后重启</p>
<pre><code class="shell">bootstrap.system_call_filter: false
</code></pre>
<h3 id="11-7-6-错误2：文件权限不足"><a href="#11-7-6-错误2：文件权限不足" class="headerlink" title="11.7.6 错误2：文件权限不足"></a>11.7.6 错误2：文件权限不足</h3><p><img src="https://img-blog.csdnimg.cn/20181108112927213.png" alt="img"></p>
<p>我们用的是leyou用户，而不是root，所以文件权限不足。</p>
<p><strong>首先用root用户登录。直接输入exit命令</strong></p>
<p>然后修改配置文件:</p>
<pre><code class="shell">vim /etc/security/limits.conf
</code></pre>
<p>添加下面的内容：</p>
<pre><code class="shell">* soft nofile 65536

* hard nofile 131072

* soft nproc 4096

* hard nproc 4096
</code></pre>
<h3 id="11-7-7-错误3：线程数不够"><a href="#11-7-7-错误3：线程数不够" class="headerlink" title="11.7.7 错误3：线程数不够"></a>11.7.7 错误3：线程数不够</h3><p>[1]: max number of threads [1024] for user [leyou] is too low, increase to at least [4096]</p>
<p>继续修改配置：</p>
<pre><code class="shell">vim /etc/security/limits.d/90-nproc.conf 
</code></pre>
<p>修改下面的内容：</p>
<pre><code class="shell">* soft nproc 1024
</code></pre>
<p>改为</p>
<pre><code class="shell">* soft nproc 4096
</code></pre>
<h3 id="11-7-8-错误4：进程虚拟内存"><a href="#11-7-8-错误4：进程虚拟内存" class="headerlink" title="11.7.8 错误4：进程虚拟内存"></a>11.7.8 错误4：进程虚拟内存</h3><p>[3]: max virtual memory areas vm.max_map_count [65530] likely too low, increase to at least [262144]</p>
<p>vm.max_map_count：限制一个进程可以拥有的VMA(虚拟内存区域)的数量，继续修改配置文件， ：</p>
<pre><code class="shell">vim /etc/sysctl.conf 
</code></pre>
<p>添加下面内容：</p>
<pre><code class="shell">vm.max_map_count=655360
</code></pre>
<p>然后执行命令：</p>
<pre><code class="shell">sysctl -p
</code></pre>
<h3 id="11-7-9-重启终端窗口"><a href="#11-7-9-重启终端窗口" class="headerlink" title="11.7.9 重启终端窗口"></a>11.7.9 重启终端窗口</h3><p>所有错误修改完毕，一定要重启你的 Xshell终端，否则配置无效。</p>
<h2 id="11-8-安装RabbitMQ"><a href="#11-8-安装RabbitMQ" class="headerlink" title="11.8 安装RabbitMQ"></a>11.8 安装RabbitMQ</h2><pre><code class="shell">cd /usr/local/myapp

mkdir rabbitmq

cd rabbitmq
</code></pre>
<h3 id="11-8-1-安装Erlang"><a href="#11-8-1-安装Erlang" class="headerlink" title="11.8.1 安装Erlang"></a>11.8.1 安装Erlang</h3><p>1、在线安装</p>
<pre><code class="shell">yum install esl-erlang_17.3-1~centos~6_amd64.rpm

yum install esl-erlang-compat-R14B-1.el6.noarch.rpm
</code></pre>
<p>2、离线安装</p>
<p><img src="https://img-blog.csdnimg.cn/20181108113926728.png" alt="img"></p>
<p>依次执行命令：</p>
<p>1）rpm -ivh esl-erlang-17.3-1.x86_64.rpm –force –nodeps</p>
<p><img src="https://img-blog.csdnimg.cn/20181108113955569.png" alt="img"></p>
<p>2）rpm -ivh esl-erlang_17.3-1<del>centos</del>6_amd64.rpm –force –nodeps</p>
<p><img src="https://img-blog.csdnimg.cn/20181108114048547.png" alt="img"></p>
<p>3）rpm -ivh esl-erlang-compat-R14B-1.el6.noarch.rpm –force –nodeps</p>
<p><img src="https://img-blog.csdnimg.cn/20181108114104822.png" alt="img"></p>
<h3 id="11-8-2-安装RabbitMQ"><a href="#11-8-2-安装RabbitMQ" class="headerlink" title="11.8.2 安装RabbitMQ"></a>11.8.2 安装RabbitMQ</h3><p><img src="https://img-blog.csdnimg.cn/20181108114133826.png" alt="img"></p>
<p>安装：</p>
<pre><code class="shell">rpm -ivh rabbitmq-server-3.4.1-1.noarch.rpm
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20181108114155527.png" alt="img"></p>
<h3 id="11-8-3-设置配置文件"><a href="#11-8-3-设置配置文件" class="headerlink" title="11.8.3 设置配置文件"></a>11.8.3 设置配置文件</h3><pre><code class="shell">cp /usr/share/doc/rabbitmq-server-3.4.1/rabbitmq.config.example
/etc/rabbitmq/rabbitmq.config
</code></pre>
<p>开启用户远程访问</p>
<pre><code class="shell">vi /etc/rabbitmq/rabbitmq.config
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/2018110811430787.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p><strong>注意要去掉后面的逗号。</strong></p>
<h3 id="11-8-4-启动、停止"><a href="#11-8-4-启动、停止" class="headerlink" title="11.8.4 启动、停止"></a>11.8.4 启动、停止</h3><pre><code class="shell">service rabbitmq-server start

service rabbitmq-server stop

service rabbitmq-server restart
</code></pre>
<h3 id="11-8-5-开启web界面管理工具"><a href="#11-8-5-开启web界面管理工具" class="headerlink" title="11.8.5 开启web界面管理工具"></a>11.8.5 开启web界面管理工具</h3><pre><code class="shell">rabbitmq-plugins enable rabbitmq_management

service rabbitmq-server restart
</code></pre>
<h3 id="11-8-6-设置开机启动"><a href="#11-8-6-设置开机启动" class="headerlink" title="11.8.6 设置开机启动"></a>11.8.6 设置开机启动</h3><pre><code class="shell">chkconfig rabbitmq-server on
</code></pre>
<h3 id="11-8-7-防火墙开放15672端口"><a href="#11-8-7-防火墙开放15672端口" class="headerlink" title="11.8.7 防火墙开放15672端口"></a>11.8.7 防火墙开放15672端口</h3><pre><code class="shell">/sbin/iptables -I INPUT -p tcp --dport 15672 -j ACCEPT

/etc/rc.d/init.d/iptables save
</code></pre>
<h2 id="11-9-redis安装和配置"><a href="#11-9-redis安装和配置" class="headerlink" title="11.9 redis安装和配置"></a>11.9 redis安装和配置</h2><h3 id="11-9-1-安装"><a href="#11-9-1-安装" class="headerlink" title="11.9.1 安装"></a>11.9.1 安装</h3><p>解压</p>
<pre><code class="shell">tar -xvf redis-4.0.9.tar.gz
</code></pre>
<p>编译安装</p>
<pre><code class="shell"> mv redis-4.0.9 redis
 cd redis
 make &amp;&amp; make install
</code></pre>
<h3 id="11-9-2-配置"><a href="#11-9-2-配置" class="headerlink" title="11.9.2 配置"></a>11.9.2 配置</h3><p>修改安装目录下的redis.conf文件</p>
<pre><code class="shell">vim redis.conf
</code></pre>
<p>修改以下配置：</p>
<pre><code class="shell">#bind 127.0.0.1 # 将这行代码注释，监听所有的ip地址，外网可以访问
protected-mode no # 把yes改成no，允许外网访问
daemonize yes # 把no改成yes，后台运行
</code></pre>
<h3 id="11-9-3-启动或停止"><a href="#11-9-3-启动或停止" class="headerlink" title="11.9.3 启动或停止"></a>11.9.3 启动或停止</h3><p>redis提供了服务端命令和客户端命令：</p>
<ul>
<li>redis-server 服务端命令，可以包含以下参数： start 启动 stop 停止</li>
<li>redis-cli 客户端控制台，包含参数： -h xxx 指定服务端地址，缺省值是127.0.0.1 -p xxx 指定服务端端口，缺省值是6379</li>
</ul>
<h3 id="11-9-4-设置开机启动"><a href="#11-9-4-设置开机启动" class="headerlink" title="11.9.4 设置开机启动"></a>11.9.4 设置开机启动</h3><p>1）输入命令，新建文件</p>
<pre><code class="shell">vim /etc/init.d/redis
</code></pre>
<p>输入下面内容：</p>
<pre><code class="shell">#!/bin/sh
# chkconfig:   2345 90 10
# description:  Redis is a persistent key-value database
PATH=/usr/local/bin:/sbin:/usr/bin:/bin

REDISPORT=6379
EXEC=/usr/local/bin/redis-server
REDIS_CLI=/usr/local/bin/redis-cli

PIDFILE=/var/run/redis.pid

CONF=&quot;/usr/local/leyou/redis/redis.conf&quot;

case &quot;$1&quot; in  
    start)  
        if [ -f $PIDFILE ]  
        then  
                echo &quot;$PIDFILE exists, process is already running or crashed&quot;  
        else  
                echo &quot;Starting Redis server...&quot;  
                $EXEC $CONF  
        fi  
        if [ &quot;$?&quot;=&quot;0&quot; ]   
        then  
              echo &quot;Redis is running...&quot;  
        fi  
        ;;  
    stop)  
        if [ ! -f $PIDFILE ]  
        then  
                echo &quot;$PIDFILE does not exist, process is not running&quot;  
        else  
                PID=$(cat $PIDFILE)  
                echo &quot;Stopping ...&quot;  
                $REDIS_CLI -p $REDISPORT SHUTDOWN  
                while [ -x $&#123;PIDFILE&#125; ]  
               do  
                    echo &quot;Waiting for Redis to shutdown ...&quot;  
                    sleep 1  
                done  
                echo &quot;Redis stopped&quot;  
        fi  
        ;;  
   restart|force-reload)  
        $&#123;0&#125; stop  
        $&#123;0&#125; start  
        ;;  
  *)  
    echo &quot;Usage: /etc/init.d/redis &#123;start|stop|restart|force-reload&#125;&quot; &gt;&amp;2  
        exit 1  
esac
</code></pre>
<p>然后保存退出</p>
<p>注意：以下信息需要根据安装目录进行调整：</p>
<blockquote>
<p>EXEC&#x3D;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;redis-server # 执行脚本的地址</p>
<p>REDIS_CLI&#x3D;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;redis-cli # 客户端执行脚本的地址</p>
<p>PIDFILE&#x3D;&#x2F;var&#x2F;run&#x2F;redis.pid # 进程id文件地址</p>
<p>CONF&#x3D;”&#x2F;usr&#x2F;local&#x2F;src&#x2F;redis-3.0.2&#x2F;redis.conf” #配置文件地址</p>
</blockquote>
<p>2）设置权限</p>
<pre><code class="shell">chmod 755 /etc/init.d/redis
</code></pre>
<p>3）启动测试</p>
<pre><code class="shell">/etc/init.d/redis start
</code></pre>
<p>启动成功会提示如下信息：</p>
<p>Starting Redis server…<br> Redis is running…</p>
<p>4）设置开机自启动</p>
<pre><code class="shell">chkconfig --add /etc/init.d/redis
chkconfig redis on
</code></pre>

            
        </div>
    </div>

    <div class="post-tags">
        
        
    </div>

    <a href="/2022/07/06/Linux常用命令/ " class="go-post">
        阅读全文
    </a>
</div>

<div class="post">

    <a href="/2022/07/06/hello-world/">
        <h2>
            Hello World
        </h2>
    </a>

    <div class="category-and-date">

        

        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2022/7/6
        </span>

    </div>

    <div class="excerpt">
        <div class="content" v-pre>
            
            
            <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre><code class="bash">$ hexo new &quot;My New Post&quot;
</code></pre>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre><code class="bash">$ hexo server
</code></pre>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre><code class="bash">$ hexo generate
</code></pre>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre><code class="bash">$ hexo deploy
</code></pre>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

            
        </div>
    </div>

    <div class="post-tags">
        
        
    </div>

    <a href="/2022/07/06/hello-world/ " class="go-post">
        阅读全文
    </a>
</div>


             
<div class="page-current">

    <div class="prev">
        
    </div>

    <div class="page-index">

        

        <span class="current">
            1
        </span>

        

    </div>

    <div class="next">
        
    </div>

</div>

        </div>
    </div>
    
    <div id="home-card">
        <a-affix :offset-top="card_top">
    <a-card class="card-style" style="width: 300px">
        <div class="avatar">
            <img src="aaa.mp3 " alt="头像">
        </div>
        <div class="name">
            Demon
        </div>
        <div class="descriptions">
            
            <div class="description">
                一个程序员小白
            </div>
            
        </div>
        <div class="icon-links">
            
            <span class="icon-link">
                <a target="_blank" rel="noopener" href="https://github.com/demon-gu">

                    
                    <a-icon type="github"
                        theme="filled" />
                    
                </a>
            </span>
            
            <span class="icon-link">
                <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_23329167?spm=1000.2115.3001.5343">

                    
                    <a-icon type="chrome"
                        theme="filled" />
                    
                </a>
            </span>
            
        </div>
        <div class="friend-links">
            
            <div class="friend-link">
                <a target="_blank" rel="noopener" href="https://en.korilin.com">
                    英文技术博客
                </a>
            </div>
            
            <div class="friend-link">
                <a target="_blank" rel="noopener" href="https://jp.korilin.com">
                    日语记录博客
                </a>
            </div>
            
        </div>
    </a-card>
</a-affix>
    </div>
    
</div>
                     
<footer id="footer">
    <div class="footer-wrap">
        <div>
            © 2022 - 2022 BigData
            <span class="footer-icon">
                <a-icon type="flag" theme="filled" /></span>
            @Demon
        </div>
        <div></div>
        <div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo Engine</a> & <a
                target="_blank" rel="noopener" href="https://github.com/korilin/hexo-theme-particle">Particle Theme</a></div>
        
    </div>

</footer>

<script src="/js/highlight.min.js"></script>
<script src="/js/particle.js"></script>
                </div>
            </div>
        </transition>
    </div>

    <script>
    new Vue({
        el: "#layout",
        data: {
            show_page: false,
            onload_menu: false,
            menu_show: false,
            card_top: 100
        },
        created: function () {
            var that = this
            window.onload = function () {
                that.show_page = true
                document.getElementById("loadcontent").style.opacity = 0
                setTimeout(function () {
                    document.getElementById("loadleft").style.width = 0
                    document.getElementById("loadright").style.width = 0
                }, 300)
                setTimeout(function () {
                    document.getElementById("loading").style = "display:none"
                }, 600)
            }
        },
        mounted: function () {
            var that = this
            window.addEventListener('scroll', function (e) {
                that.menu_show = false
            })
        },
        methods: {
            home_click: function () {
                window.scrollTo({
                    top: window.innerHeight - 80,
                    behavior: "smooth",
                });
            }
        }
    })
</script>

</body>

</html>